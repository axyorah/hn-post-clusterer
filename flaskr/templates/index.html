<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HN Post Clusterer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="{{url_for('static', filename='css/style.css')}}">
    <link rel="stylesheet" href="{{url_for('static', filename='css/figures.css')}}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">
</head>

<body>

    <main class="container">

        <ul class="nav nav-tabs" id="seed-tab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="seed-tab-btn" data-bs-toggle="tab" data-bs-target="#seed-form"
                    aria-selected="true">
                    <h2>Get and Filter Data</h2>
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="simple-cluster-tab-btn" data-bs-toggle="tab"
                    data-bs-target="#simple-cluster" aria-selected="false">
                    <h2>Simple Clustering</h2>
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="test-tab-btn" data-bs-toggle="tab" data-bs-target="#test-form"
                    type="button" role="tab" aria-controls="test" aria-selected="false">
                    <h2>Testing stuff...</h2>
                </button>
            </li>
        </ul>

        <div class="tab-content" id="tab-content">

            <section class="tab-pane fade show active" id="seed-form" role="tabpanel" aria-labelledby="seed-form">
                {% include "partials/get_data_tab.html" %}
            </section>

            <section class="tab-pane fade" id="simple-cluster" role="tabpanel" aria-labelledby="simple-cluster">
                {% include "partials/simple_cluster_tab.html" %}
            </section>

            <section class="tab-pane fade" id="test-form" role="tabpanel" aria-labelledby="test-tab">
                {% include "partials/test_tab.html" %}
            </section>

        </div>

        <div class="box" id="table-root"></div>
    </main>

    <script>
        const container = document.querySelector(".container");
        const tabs = document.querySelectorAll(".nav-link");

        // `Get and Filter Data` tab
        const seed = new Object();
        for (let filterBy of ["date", "id"]) {
            if (seed[filterBy] === undefined) {
                seed[filterBy] = new Object();
            }
            for (let loc of ["begin", "end"]) {
                if (seed[filterBy][loc] === undefined) {
                    seed[filterBy][loc] = new Object();
                }
                seed[filterBy][loc]["range"] = document.querySelector(`#seed-${filterBy}-${loc}-range`);
                seed[filterBy][loc]["label"] = document.querySelector(`#seed-${filterBy}-${loc}-label`);
            }
        }
        const seedSubmitBtn = document.querySelector("#seed-submit-btn");

        const show = new Object();
        for (let filterBy of ["date", "id", "comm", "score"]) {
            if (show[filterBy] === undefined) {
                show[filterBy] = new Object();
            }
            for (let loc of ["begin", "end"]) {
                if (show[filterBy][loc] === undefined) {
                    show[filterBy][loc] = new Object();
                }
                show[filterBy][loc]["range"] = document.querySelector(`#show-${filterBy}-${loc}-range`);
                show[filterBy][loc]["label"] = document.querySelector(`#show-${filterBy}-${loc}-label`);
            }
        }
        const queryDbBtn = document.querySelector("#post-db-btn");
        const tableRoot = document.querySelector("#table-root");

        // `Simple Clustering` tab
        const runSimpleClusterBtn = document.querySelector("#run-simple-cluster-btn");
        const showLsiTopicsNum = document.querySelector("#show-lsi-topics-num");
        const showKmeansClustersNum = document.querySelector("#show-kmeans-clusters-num");
        const showSimpleClusterPostsBtn = document.querySelector("#show-simple-cluster-posts-btn");
        const showKmeansClusteredPostsNum = document.querySelector("#show-kmeans-clustered-posts-num")
        const simpleClusterPlotRoot = document.querySelector('#simple-cluster-plot-root')

    </script>

    <script src="{{url_for('static', filename='js/tabstyle.js')}}"></script>
    <script src="{{url_for('static', filename='js/index.js')}}"></script>
    <script src="{{url_for('static', filename='js/seeddb_utils.js')}}"></script>
    <script src="{{url_for('static', filename='js/table_utils.js')}}"></script>"
    <script src="{{url_for('static', filename='js/cluster_utils.js')}}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>

</body>

</html>